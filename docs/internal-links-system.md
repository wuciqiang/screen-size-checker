# ç»Ÿä¸€å†…é“¾ç®¡ç†ç³»ç»Ÿæ–‡æ¡£

## æ¦‚è¿°

ç»Ÿä¸€å†…é“¾ç®¡ç†ç³»ç»Ÿæ˜¯ä¸€ä¸ªé›†ä¸­åŒ–çš„å†…é“¾ç®¡ç†è§£å†³æ–¹æ¡ˆï¼Œæ—¨åœ¨è§£å†³ç½‘ç«™å†…é“¾ç»´æŠ¤å›°éš¾ã€ä¸ä¸€è‡´å’Œé‡å¤å·¥ä½œçš„é—®é¢˜ã€‚é€šè¿‡ç»Ÿä¸€çš„é…ç½®æ–‡ä»¶å’Œæ™ºèƒ½çš„æ¸²æŸ“ç»„ä»¶ï¼Œå®ç°äº†å†…é“¾çš„é›†ä¸­ç®¡ç†ã€è‡ªåŠ¨å»é‡å’Œç»Ÿä¸€é£æ ¼ã€‚

## ç³»ç»Ÿæ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç»Ÿä¸€å†…é“¾ç®¡ç†ç³»ç»Ÿ                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  é…ç½®å±‚ (Configuration Layer)                               â”‚
â”‚  â””â”€â”€ data/internal-links-config.json                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç»„ä»¶å±‚ (Component Layer)                                   â”‚
â”‚  â”œâ”€â”€ components/internal-links.html                        â”‚
â”‚  â”œâ”€â”€ js/internal-links.js                                  â”‚
â”‚  â””â”€â”€ css/internal-links.css                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ„å»ºå±‚ (Build Layer)                                       â”‚
â”‚  â”œâ”€â”€ build/internal-links-processor.js                     â”‚
â”‚  â””â”€â”€ build/migrate-internal-links.js                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## æ ¸å¿ƒåŠŸèƒ½

### 1. é›†ä¸­é…ç½®ç®¡ç†
- å•ä¸€é…ç½®æ–‡ä»¶ç®¡ç†æ‰€æœ‰é¡µé¢çš„å†…é“¾ä¿¡æ¯
- æ”¯æŒå¤šè¯­è¨€URLé…ç½®
- çµæ´»çš„åˆ†ç±»å’Œä¼˜å…ˆçº§è®¾ç½®

### 2. æ™ºèƒ½å»é‡æœºåˆ¶
- è‡ªåŠ¨æ£€æµ‹å½“å‰é¡µé¢å¹¶æ’é™¤
- åŸºäºURLè·¯å¾„çš„å‡†ç¡®åŒ¹é…
- æ”¯æŒçµæ´»çš„åŒ¹é…ç­–ç•¥

### 3. ç»Ÿä¸€è§†è§‰é£æ ¼
- ä¸€è‡´çš„å¸ƒå±€å’Œæ ·å¼
- å“åº”å¼è®¾è®¡æ”¯æŒ
- åˆ†ç±»ç‰¹å®šçš„è§†è§‰æ ·å¼

### 4. æ™ºèƒ½æ’åºå’Œåˆ†ç±»
- åŸºäºç›¸å…³æ€§çš„æ™ºèƒ½æ’åº
- åˆ†ç±»ä¼˜å…ˆçº§å¤„ç†
- è®¾å¤‡è‡ªé€‚åº”æ˜¾ç¤ºæ•°é‡

### 5. å¤šè¯­è¨€æ”¯æŒ
- å®Œæ•´çš„i18nexté›†æˆ
- ç¿»è¯‘é”®å’Œç›´æ¥æ–‡æœ¬æ”¯æŒ
- è¯­è¨€åˆ‡æ¢æ—¶çš„åŠ¨æ€æ›´æ–°

## é…ç½®æ–‡ä»¶ç»“æ„

### ä¸»é…ç½®æ–‡ä»¶ (data/internal-links-config.json)

```json
{
  "version": "1.0.0",
  "pages": {
    "page-id": {
      "id": "page-id",
      "category": "category-name",
      "priority": 1,
      "icon": "ğŸ“±",
      "urls": {
        "en": "path/to/page.html",
        "zh": "path/to/page.html"
      },
      "titleKey": "translation_key",
      "descriptionKey": "description_translation_key"
    }
  },
  "categories": {
    "category-name": {
      "priority": 1,
      "maxItems": 3,
      "name": "åˆ†ç±»åç§°"
    }
  },
  "display": {
    "maxTotal": 8,
    "responsive": {
      "mobile": 4,
      "tablet": 6,
      "desktop": 8
    }
  },
  "rules": {
    "excludeCurrent": true,
    "prioritizeCategory": true,
    "fallbackToAll": true
  }
}
```

### é…ç½®å­—æ®µè¯´æ˜

#### é¡µé¢é…ç½® (pages)
- `id`: é¡µé¢å”¯ä¸€æ ‡è¯†ç¬¦
- `category`: é¡µé¢åˆ†ç±»
- `priority`: é¡µé¢ä¼˜å…ˆçº§ï¼ˆæ•°å­—è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼‰
- `icon`: æ˜¾ç¤ºå›¾æ ‡ï¼ˆemojiæˆ–å­—ç¬¦ï¼‰
- `urls`: å¤šè¯­è¨€URLé…ç½®
- `titleKey`: æ ‡é¢˜ç¿»è¯‘é”®
- `descriptionKey`: æè¿°ç¿»è¯‘é”®

#### åˆ†ç±»é…ç½® (categories)
- `priority`: åˆ†ç±»ä¼˜å…ˆçº§
- `maxItems`: è¯¥åˆ†ç±»æœ€å¤§æ˜¾ç¤ºæ•°é‡
- `name`: åˆ†ç±»æ˜¾ç¤ºåç§°

#### æ˜¾ç¤ºé…ç½® (display)
- `maxTotal`: æ€»æœ€å¤§æ˜¾ç¤ºæ•°é‡
- `responsive`: å“åº”å¼æ˜¾ç¤ºæ•°é‡é…ç½®

#### è§„åˆ™é…ç½® (rules)
- `excludeCurrent`: æ˜¯å¦æ’é™¤å½“å‰é¡µé¢
- `prioritizeCategory`: æ˜¯å¦å¯ç”¨åˆ†ç±»ä¼˜å…ˆ
- `fallbackToAll`: æ˜¯å¦é™çº§åˆ°æ˜¾ç¤ºæ‰€æœ‰é“¾æ¥

## ä½¿ç”¨æ–¹æ³•

### 1. åœ¨é¡µé¢ä¸­ä½¿ç”¨å†…é“¾ç»„ä»¶

åœ¨éœ€è¦æ˜¾ç¤ºå†…é“¾çš„é¡µé¢æ¨¡æ¿ä¸­æ·»åŠ ï¼š

```html
{{component:internal-links}}
```

### 2. æ·»åŠ æ–°é¡µé¢

åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ æ–°é¡µé¢ä¿¡æ¯ï¼š

```json
{
  "new-page-id": {
    "id": "new-page-id",
    "category": "tools",
    "priority": 3,
    "icon": "ğŸ”§",
    "urls": {
      "en": "tools/new-page.html",
      "zh": "tools/new-page.html"
    },
    "titleKey": "new_page_title",
    "descriptionKey": "new_page_description"
  }
}
```

### 3. æ·»åŠ ç¿»è¯‘é”®

åœ¨ç¿»è¯‘æ–‡ä»¶ä¸­æ·»åŠ å¯¹åº”çš„ç¿»è¯‘ï¼š

```json
{
  "new_page_title": "æ–°é¡µé¢æ ‡é¢˜",
  "new_page_description": "æ–°é¡µé¢æè¿°"
}
```

### 4. è¿è¡Œæ„å»º

```bash
npm run multilang-build
```

## API å‚è€ƒ

### JavaScript API

#### InternalLinksManager ç±»

```javascript
import { InternalLinksManager } from './js/internal-links.js';

const manager = new InternalLinksManager({
  maxItems: 8,
  excludeCurrent: true,
  configPath: '../data/internal-links-config.json'
});

await manager.init();
```

#### é…ç½®é€‰é¡¹

- `maxItems`: æœ€å¤§æ˜¾ç¤ºæ•°é‡
- `excludeCurrent`: æ˜¯å¦æ’é™¤å½“å‰é¡µé¢
- `configPath`: é…ç½®æ–‡ä»¶è·¯å¾„

#### ä¸»è¦æ–¹æ³•

- `init()`: åˆå§‹åŒ–ç®¡ç†å™¨
- `refresh()`: åˆ·æ–°å†…é“¾æ˜¾ç¤º
- `destroy()`: é”€æ¯ç®¡ç†å™¨

### æ„å»ºæ—¶API

#### InternalLinksProcessor ç±»

```javascript
const InternalLinksProcessor = require('./build/internal-links-processor');

const processor = new InternalLinksProcessor();
const result = processor.process(translations);
```

#### ä¸»è¦æ–¹æ³•

- `validateConfig()`: éªŒè¯é…ç½®æ–‡ä»¶
- `validateTranslationKeys()`: éªŒè¯ç¿»è¯‘é”®
- `processPageLinks()`: å¤„ç†é¡µé¢å†…é“¾
- `generateReport()`: ç”Ÿæˆå¤„ç†æŠ¥å‘Š

## ç»´æŠ¤å·¥å…·

### 1. è¿ç§»å·¥å…·

ç”¨äºå°†ç°æœ‰é¡µé¢çš„å†…é“¾ä»£ç è¿ç§»åˆ°ç»Ÿä¸€ç³»ç»Ÿï¼š

```bash
node build/migrate-internal-links.js
```

### 2. é…ç½®éªŒè¯

æ„å»ºæ—¶è‡ªåŠ¨éªŒè¯é…ç½®æ–‡ä»¶çš„å®Œæ•´æ€§å’Œæ­£ç¡®æ€§ã€‚

### 3. ç¿»è¯‘é”®æ£€æŸ¥

è‡ªåŠ¨æ£€æŸ¥ç¿»è¯‘é”®çš„å­˜åœ¨æ€§å’Œä¸€è‡´æ€§ã€‚

### 4. æŠ¥å‘Šç”Ÿæˆ

ç”Ÿæˆè¯¦ç»†çš„å¤„ç†æŠ¥å‘Šï¼ŒåŒ…æ‹¬ï¼š
- é¡µé¢ç»Ÿè®¡
- åˆ†ç±»åˆ†å¸ƒ
- è¯­è¨€æ”¯æŒæƒ…å†µ
- é”™è¯¯å’Œè­¦å‘Š

## æ€§èƒ½ä¼˜åŒ–

### 1. æ‡’åŠ è½½
- é…ç½®æ–‡ä»¶æŒ‰éœ€åŠ è½½
- æ”¯æŒæµè§ˆå™¨ç¼“å­˜

### 2. æ¸²æŸ“ä¼˜åŒ–
- ä½¿ç”¨æ–‡æ¡£ç‰‡æ®µæ‰¹é‡æ“ä½œDOM
- é¿å…é‡å¤çš„æ ·å¼è®¡ç®—

### 3. ç¼“å­˜ç­–ç•¥
- é…ç½®æ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶
- æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ç¼“å­˜

## é”™è¯¯å¤„ç†

### 1. é…ç½®é”™è¯¯
- æ ¼å¼éªŒè¯
- ç¼ºå¤±å­—æ®µçš„é»˜è®¤å€¼
- é”™è¯¯é…ç½®çš„é™çº§å¤„ç†

### 2. è¿è¡Œæ—¶é”™è¯¯
- ç½‘ç»œè¯·æ±‚å¤±è´¥å¤„ç†
- DOMæ“ä½œå¼‚å¸¸å¤„ç†
- ç¿»è¯‘ç¼ºå¤±çš„é™çº§æ˜¾ç¤º

### 3. ç”¨æˆ·ä½“éªŒä¿éšœ
- åŠ è½½çŠ¶æ€æŒ‡ç¤º
- é”™è¯¯çŠ¶æ€å‹å¥½æç¤º
- ä¼˜é›…é™çº§æœºåˆ¶

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. å†…é“¾ä¸æ˜¾ç¤º
- æ£€æŸ¥é¡µé¢æ˜¯å¦åŒ…å«å†…é“¾ç»„ä»¶
- éªŒè¯é…ç½®æ–‡ä»¶æ ¼å¼
- æ£€æŸ¥JavaScriptæ§åˆ¶å°é”™è¯¯

#### 2. ç¿»è¯‘ä¸æ­£ç¡®
- ç¡®è®¤ç¿»è¯‘é”®å­˜åœ¨
- æ£€æŸ¥i18nextåˆå§‹åŒ–çŠ¶æ€
- éªŒè¯è¯­è¨€æ£€æµ‹é€»è¾‘

#### 3. æ ·å¼é—®é¢˜
- ç¡®è®¤CSSæ–‡ä»¶æ­£ç¡®å¼•å…¥
- æ£€æŸ¥CSSå˜é‡å®šä¹‰
- éªŒè¯å“åº”å¼æ–­ç‚¹

### è°ƒè¯•å·¥å…·

#### 1. æ§åˆ¶å°æ—¥å¿—
ç³»ç»Ÿæä¾›è¯¦ç»†çš„æ§åˆ¶å°æ—¥å¿—ï¼ŒåŒ…æ‹¬ï¼š
- åˆå§‹åŒ–çŠ¶æ€
- é…ç½®åŠ è½½æƒ…å†µ
- é¡µé¢æ£€æµ‹ç»“æœ
- æ¸²æŸ“è¿‡ç¨‹ä¿¡æ¯

#### 2. æ„å»ºæŠ¥å‘Š
æŸ¥çœ‹æ„å»ºæ—¶ç”Ÿæˆçš„æŠ¥å‘Šæ–‡ä»¶ï¼š
- `build/internal-links-report.json`
- `build/internal-links-migration-report.json`

## æœ€ä½³å®è·µ

### 1. é…ç½®ç®¡ç†
- ä¿æŒé…ç½®æ–‡ä»¶çš„ç®€æ´æ€§
- ä½¿ç”¨æœ‰æ„ä¹‰çš„é¡µé¢ID
- åˆç†è®¾ç½®ä¼˜å…ˆçº§

### 2. ç¿»è¯‘ç®¡ç†
- ä½¿ç”¨æè¿°æ€§çš„ç¿»è¯‘é”®
- ä¿æŒç¿»è¯‘çš„ä¸€è‡´æ€§
- åŠæ—¶æ›´æ–°ç¿»è¯‘å†…å®¹

### 3. æ€§èƒ½è€ƒè™‘
- æ§åˆ¶æ˜¾ç¤ºçš„é“¾æ¥æ•°é‡
- ä¼˜åŒ–å›¾æ ‡å’Œå›¾ç‰‡èµ„æº
- åˆç†ä½¿ç”¨ç¼“å­˜ç­–ç•¥

### 4. ç»´æŠ¤å»ºè®®
- å®šæœŸæ£€æŸ¥é…ç½®æ–‡ä»¶
- ç›‘æ§é”™è¯¯æ—¥å¿—
- åŠæ—¶æ›´æ–°æ–‡æ¡£

## ç‰ˆæœ¬å†å²

### v1.0.0
- åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- åŸºç¡€å†…é“¾ç®¡ç†åŠŸèƒ½
- å¤šè¯­è¨€æ”¯æŒ
- æ„å»ºç³»ç»Ÿé›†æˆ

## æ”¯æŒå’Œåé¦ˆ

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- åˆ›å»ºIssue
- æäº¤Pull Request
- å‘é€é‚®ä»¶åé¦ˆ

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ï¼Œè¯¦è§LICENSEæ–‡ä»¶ã€‚