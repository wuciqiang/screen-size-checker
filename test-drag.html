<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>拖动功能测试</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/simulator.css">
    <style>
        body {
            padding: 20px;
            font-family: Arial, sans-serif;
        }
        .test-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        .test-info h2 {
            color: #007bff;
            margin-top: 0;
        }
        .optimization-list {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 6px;
            margin: 10px 0;
        }
        .optimization-list h3 {
            color: #28a745;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="test-info">
        <h2>🚀 拖动功能优化测试</h2>
        <p>这个页面用于测试优化后的iframe拖动功能。主要优化包括：</p>
        
        <div class="optimization-list">
            <h3>性能优化：</h3>
            <ul>
                <li>✅ 使用requestAnimationFrame确保流畅的动画</li>
                <li>✅ 缓存DOM元素避免重复查询</li>
                <li>✅ 全局事件处理器避免重复创建函数</li>
                <li>✅ 优化的拖动状态管理</li>
                <li>✅ 移除CSS过渡效果提升响应速度</li>
                <li>✅ 使用will-change属性优化渲染</li>
            </ul>
        </div>
        
        <p><strong>测试方法：</strong>拖动iframe右下角、右边缘或底边缘的蓝色拖动手柄，观察拖动的流畅度和响应性。</p>
    </div>

    <!-- 模拟器内容 -->
    <div class="simulator-section">
        <div class="container">
            <div class="simulator-preview">
                <div id="simulator-container">
                    <div id="simulator-size-display">当前尺寸: 800 × 600</div>
                    <div id="simulator-frame-wrapper">
                        <iframe id="simulator-frame" style="width: 800px; height: 600px;" srcdoc="<html><body style='font-family:sans-serif;text-align:center;padding-top:20%;background:#f0f8ff;'><h1 style='color:#007bff;'>拖动测试页面</h1><p>拖动右下角、右边缘或底边缘的蓝色手柄来调整大小</p><p style='color:#28a745;'>✓ 优化后的拖动功能</p></body></html>"></iframe>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- 隐藏的输入框用于测试 -->
    <input type="hidden" id="custom-width" value="800">
    <input type="hidden" id="custom-height" value="600">

    <script src="js/simulator.js"></script>
    <script>
        // 初始化拖动功能
        document.addEventListener('DOMContentLoaded', function() {
            console.log('🚀 初始化拖动测试页面...');
            
            // 直接调用拖动功能初始化
            makeIframeResizable();
            
            console.log('✅ 拖动功能已初始化');
        });
    </script>
</body>
</html>