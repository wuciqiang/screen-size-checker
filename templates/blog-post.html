<!DOCTYPE html>
<html lang="{{lang}}">
<head>
    {{component:head}}
    
    <!-- 博客页面性能优化 -->
    <link rel="preconnect" href="https://quickchart.io" crossorigin>
    <link rel="dns-prefetch" href="https://quickchart.io">
    
    <!-- 博客页面特定CSS - Phase 2.3 Performance Optimization -->
    <!-- Unified mobile CSS replacing 10 mobile files (4,586 lines -> 1 optimized file) -->
    <link rel="stylesheet" href="{{css_path}}/blog.css">
    <link rel="stylesheet" href="{{css_path}}/mobile-unified.css">
    <link rel="stylesheet" href="{{css_path}}/highlight.min.css">
    <link rel="stylesheet" href="{{css_path}}/blog-progress.css">
    
    <!-- Critical: Mobile menu scroll fix for blog pages -->
    <style>
        @media (max-width: 768px) {
            #main-nav {
                overflow-y: auto !important;
                overflow-x: hidden !important;
                -webkit-overflow-scrolling: touch !important;
                overscroll-behavior: contain !important;
            }
            
            #main-nav.active {
                overflow-y: auto !important;
                overflow-x: hidden !important;
            }
        }
    </style>
</head>
<body data-theme="light" class="blog-mobile-optimized">
    <!-- 头部导航 -->
    {{component:header-mega-menu}}
    
    <!-- 面包屑导航 -->
    {{#if show_breadcrumb}}
    {{component:breadcrumb}}
    {{/if}}
    
    <main class="main-content blog-main">
        <div class="blog-container">
            <!-- 文章内容区域 -->
            <div class="blog-content-area blog-content-mobile">
                {{page_content}}
                
                <!-- 文章导航 -->
                <div class="post-navigation">
                    <div class="prev-post" id="prev-post">
                        <!-- 上一篇文章链接将由JS动态加载 -->
                    </div>
                    <div class="next-post" id="next-post">
                        <!-- 下一篇文章链接将由JS动态加载 -->
                    </div>
                </div>
            </div>
            
            <!-- 目录和侧边栏 -->
            <div class="blog-sidebar-area">
                <!-- 博客侧边栏 -->
                {{component:blog_sidebar}}
            </div>
        </div>
    </main>
    
    <!-- 页脚 -->
    {{component:footer-optimized}}
    
    <!-- 语言选择模态框 -->
    {{component:language-modal}}
    
    <!-- 通知组件 -->
    {{component:toast}}
    
    <!-- 博客特定JavaScript -->
    <script src="{{js_path}}/highlight.min.js"></script>
    <script src="{{js_path}}/mobile-image-optimizer.js"></script>
    <script src="{{js_path}}/code-block-manager.js"></script>
    <script src="{{js_path}}/blog.js" type="module"></script>
    <script src="{{js_path}}/blog-progress.js" type="module"></script>
    <script src="{{js_path}}/app.js" type="module"></script>

    <!-- Core Optimized JavaScript - Phase 1.1 Performance Optimization -->
    <!-- Merged core functionality modules, reduced HTTP requests, maintaining all business logic -->
    <script src="{{js_path}}/core-optimized.js" defer></script>
    
    <!-- Phase 0.2 JavaScript - Mega Menu Navigation -->
    <script src="{{js_path}}/mega-menu.js" defer></script>
    
    <!-- 结构化数据 -->
    <script type="application/ld+json">
        {{structured_data}}
    </script>
</body>
</html> 